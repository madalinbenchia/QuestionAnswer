{"remainingRequest":"D:\\Cursuri\\sem2\\Programare cu aspecte\\QuestionAnswer\\Front End\\node_modules\\babel-loader\\lib\\index.js!D:\\Cursuri\\sem2\\Programare cu aspecte\\QuestionAnswer\\Front End\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\Cursuri\\sem2\\Programare cu aspecte\\QuestionAnswer\\Front End\\src\\store\\modules\\auth.js","dependencies":[{"path":"D:\\Cursuri\\sem2\\Programare cu aspecte\\QuestionAnswer\\Front End\\src\\store\\modules\\auth.js","mtime":1615718057861},{"path":"D:\\Cursuri\\sem2\\Programare cu aspecte\\QuestionAnswer\\Front End\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1615717989082},{"path":"D:\\Cursuri\\sem2\\Programare cu aspecte\\QuestionAnswer\\Front End\\node_modules\\babel-loader\\lib\\index.js","mtime":1615717984382},{"path":"D:\\Cursuri\\sem2\\Programare cu aspecte\\QuestionAnswer\\Front End\\node_modules\\eslint-loader\\index.js","mtime":1615718022709}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZSI7CmltcG9ydCBWdWUgZnJvbSAidnVlIjsKaW1wb3J0IHJvdXRlciBmcm9tICJAL3JvdXRlciI7CmltcG9ydCB7IFZ1ZUF1dGhlbnRpY2F0ZSB9IGZyb20gInZ1ZS1hdXRoZW50aWNhdGUiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgVnVlQXhpb3MgZnJvbSAidnVlLWF4aW9zIjsKVnVlLnVzZShWdWVBeGlvcywgYXhpb3MpOwp2YXIgdnVlQXV0aCA9IG5ldyBWdWVBdXRoZW50aWNhdGUoVnVlLnByb3RvdHlwZS4kaHR0cCwgewogIGJhc2VVcmw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJX0JBU0VfVVJMLAogIHRva2VuTmFtZTogIlRva2VuIiwKICB0b2tlblBhdGg6ICJUb2tlbiIsCiAgbG9naW5Vcmw6ICIvdXNlci9sb2dpbiIsCiAgcmVnaXN0ZXJVcmw6ICIvdXNlci9yZWdpc3RlciIKfSk7CmV4cG9ydCBkZWZhdWx0IHsKICBzdGF0ZTogewogICAgaXNBdXRoZW50aWNhdGVkOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidnVlLWF1dGhlbnRpY2F0ZS52dWVhdXRoX1Rva2VuIikgIT09IG51bGwsCiAgICBuYW1lc3BhY2VkOiB0cnVlLAogICAgY3VycmVudFVzZXI6IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJjdXJyZW50VXNlciIpCiAgfSwKICBnZXR0ZXJzOiB7CiAgICBpc0F1dGhlbnRpY2F0ZWQ6IGZ1bmN0aW9uIGlzQXV0aGVudGljYXRlZChzdGF0ZSkgewogICAgICByZXR1cm4gc3RhdGUuaXNBdXRoZW50aWNhdGVkOwogICAgfSwKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSkgewogICAgICByZXR1cm4gSlNPTi5wYXJzZShzdGF0ZS5jdXJyZW50VXNlcik7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gaXNBdXRoZW50aWNhdGVkKHN0YXRlLCBwYXlsb2FkKSB7CiAgICAgIHN0YXRlLmlzQXV0aGVudGljYXRlZCA9IHBheWxvYWQuaXNBdXRoZW50aWNhdGVkOwogICAgfSwKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS5jdXJyZW50VXNlciA9IHBheWxvYWQuY3VycmVudFVzZXI7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY29udGV4dCwgcGF5bG9hZCkgewogICAgICByZXR1cm4gdnVlQXV0aC5sb2dpbihwYXlsb2FkLnVzZXIsIHBheWxvYWQucmVxdWVzdE9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29udGV4dC5jb21taXQoImlzQXV0aGVudGljYXRlZCIsIHsKICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogdnVlQXV0aC5pc0F1dGhlbnRpY2F0ZWQoKQogICAgICAgIH0pOwogICAgICAgIHZhciBtZSA9IEpTT04uc3RyaW5naWZ5KHJlc3BvbnNlWyJkYXRhIl0pOwogICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJjdXJyZW50VXNlciIsIG1lKTsKICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVwbGFjZSgiLyIpOyAvLyByb3V0ZXIucHVzaCh7IHBhdGg6ICIvZGFzaGJvYXJkIiB9KTsKICAgICAgfSk7CiAgICB9LAogICAgcmVnaXN0ZXI6IGZ1bmN0aW9uIHJlZ2lzdGVyKGNvbnRleHQsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIHZ1ZUF1dGgucmVnaXN0ZXIocGF5bG9hZC51c2VyLCBwYXlsb2FkLnJlcXVlc3RPcHRpb25zKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGNvbnRleHQuY29tbWl0KCJpc0F1dGhlbnRpY2F0ZWQiLCB7CiAgICAgICAgICBpc0F1dGhlbnRpY2F0ZWQ6IHZ1ZUF1dGguaXNBdXRoZW50aWNhdGVkKCkKICAgICAgICB9KTsKICAgICAgICB2YXIgbWUgPSBKU09OLnN0cmluZ2lmeShyZXNwb25zZVsiZGF0YSJdKTsKICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgiY3VycmVudFVzZXIiLCBtZSk7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoIi8iKTsKICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICBwYXRoOiAiL3F1ZXN0aW9uLW1hbmFnZW1lbnQvbGlzdC1xdWVzdGlvbnMiCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KGNvbnRleHQsIHBheWxvYWQpIHsKICAgICAgcmV0dXJuIHZ1ZUF1dGgubG9nb3V0KCkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZygiaW4gbG9nb3V0Iik7CiAgICAgICAgY29udGV4dC5jb21taXQoImlzQXV0aGVudGljYXRlZCIsIHsKICAgICAgICAgIGlzQXV0aGVudGljYXRlZDogdnVlQXV0aC5pc0F1dGhlbnRpY2F0ZWQoKQogICAgICAgIH0pOwogICAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJjdXJyZW50VXNlciIpOyAvL2RlbGV0ZSBheGlvcy5kZWZhdWx0cy5oZWFkZXJzLmNvbW1vblsiQXV0aG9yaXphdGlvbiJdOwoKICAgICAgICByb3V0ZXIucHVzaCh7CiAgICAgICAgICBuYW1lOiAiTG9naW4iCiAgICAgICAgfSk7CiAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlcGxhY2UoIi8iKTsKICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["D:/Cursuri/sem2/Programare cu aspecte/QuestionAnswer/Front End/src/store/modules/auth.js"],"names":["Vue","router","VueAuthenticate","axios","VueAxios","use","vueAuth","prototype","$http","baseUrl","process","env","VUE_APP_API_BASE_URL","tokenName","tokenPath","loginUrl","registerUrl","state","isAuthenticated","localStorage","getItem","namespaced","currentUser","getters","JSON","parse","mutations","payload","actions","login","context","user","requestOptions","then","response","commit","me","stringify","setItem","window","location","replace","register","push","path","logout","console","log","removeItem","name"],"mappings":"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","sourcesContent":["import Vue from \"vue\";\r\nimport router from \"@/router\";\r\nimport { VueAuthenticate } from \"vue-authenticate\";\r\n\r\nimport axios from \"axios\";\r\nimport VueAxios from \"vue-axios\";\r\nVue.use(VueAxios, axios);\r\n\r\nconst vueAuth = new VueAuthenticate(Vue.prototype.$http, {\r\n  baseUrl: process.env.VUE_APP_API_BASE_URL,\r\n  tokenName: \"Token\",\r\n  tokenPath: \"Token\",\r\n  loginUrl: \"/user/login\",\r\n  registerUrl: \"/user/register\"\r\n});\r\n\r\nexport default {\r\n  state: {\r\n    isAuthenticated:\r\n      localStorage.getItem(\"vue-authenticate.vueauth_Token\") !== null,\r\n    namespaced: true,\r\n    currentUser: localStorage.getItem(\"currentUser\")\r\n  },\r\n\r\n  getters: {\r\n    isAuthenticated(state) {\r\n      return state.isAuthenticated;\r\n    },\r\n    currentUser(state) {\r\n      return JSON.parse(state.currentUser);\r\n    }\r\n  },\r\n\r\n  mutations: {\r\n    isAuthenticated(state, payload) {\r\n      state.isAuthenticated = payload.isAuthenticated;\r\n    },\r\n    currentUser(state, payload) {\r\n      state.currentUser = payload.currentUser;\r\n    }\r\n  },\r\n\r\n  actions: {\r\n    login(context, payload) {\r\n      return vueAuth\r\n        .login(payload.user, payload.requestOptions)\r\n        .then(response => {\r\n          context.commit(\"isAuthenticated\", {\r\n            isAuthenticated: vueAuth.isAuthenticated()\r\n          });\r\n\r\n          let me = JSON.stringify(response[\"data\"]);\r\n          localStorage.setItem(\"currentUser\", me);\r\n\r\n          window.location.replace(\"/\");\r\n          // router.push({ path: \"/dashboard\" });\r\n        });\r\n    },\r\n\r\n    register(context, payload) {\r\n      return vueAuth\r\n        .register(payload.user, payload.requestOptions)\r\n        .then(response => {\r\n          context.commit(\"isAuthenticated\", {\r\n            isAuthenticated: vueAuth.isAuthenticated()\r\n          });\r\n          let me = JSON.stringify(response[\"data\"]);\r\n          localStorage.setItem(\"currentUser\", me);\r\n          window.location.replace(\"/\");\r\n\r\n          router.push({ path: \"/question-management/list-questions\" });\r\n        });\r\n    },\r\n\r\n    logout(context, payload) {\r\n      return vueAuth.logout().then(response => {\r\n        console.log(\"in logout\");\r\n        context.commit(\"isAuthenticated\", {\r\n          isAuthenticated: vueAuth.isAuthenticated()\r\n        });\r\n        localStorage.removeItem(\"currentUser\");\r\n\r\n        //delete axios.defaults.headers.common[\"Authorization\"];\r\n\r\n        router.push({ name: \"Login\" });\r\n        window.location.replace(\"/\");\r\n      });\r\n    }\r\n  }\r\n};\r\n"]}]}